{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/cybersecurity-platform (6)/cybersecurity-platform v1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,Link,useLocation}from'react-router-dom';import{Container,Paper,TextField,Button,Typography,Box,Alert,CircularProgress}from'@mui/material';import authService from'../services/auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const location=useLocation();const[formData,setFormData]=useState({username:'',password:''});const[errors,setErrors]=useState({});const[loading,setLoading]=useState(false);const[serverError,setServerError]=useState('');const[successMessage,setSuccessMessage]=useState('');useEffect(()=>{var _location$state;// Check for success message from registration\nif((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.message){setSuccessMessage(location.state.message);// Clear the message from location state\nwindow.history.replaceState({},document.title);}},[location]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.username){newErrors.username='Username is required';}if(!formData.password){newErrors.password='Password is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();setServerError('');setSuccessMessage('');if(!validateForm()){return;}setLoading(true);try{const user=await authService.login(formData.username,formData.password);// Store user info\nlocalStorage.setItem('user',JSON.stringify({id:user.id,username:user.username,role:user.role}));navigate('/dashboard');}catch(err){setServerError(err.message||'Authentication failed. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,mt:8},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",align:\"center\",gutterBottom:true,children:\"Login\"}),successMessage&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:successMessage}),serverError&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:serverError}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:formData.username,onChange:handleChange,error:!!errors.username,helperText:errors.username}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:formData.password,onChange:handleChange,error:!!errors.password,helperText:errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Login'}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:'center'},children:/*#__PURE__*/_jsx(Link,{to:\"/register\",style:{textDecoration:'none'},children:\"Don't have an account? Sign up\"})})]})]})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","useLocation","Container","Paper","TextField","Button","Typography","Box","Alert","CircularProgress","authService","jsx","_jsx","jsxs","_jsxs","Login","navigate","location","formData","setFormData","username","password","errors","setErrors","loading","setLoading","serverError","setServerError","successMessage","setSuccessMessage","_location$state","state","message","window","history","replaceState","document","title","handleChange","e","name","value","target","prev","_objectSpread","validateForm","newErrors","Object","keys","length","handleSubmit","preventDefault","user","login","localStorage","setItem","JSON","stringify","id","role","err","component","maxWidth","children","elevation","sx","p","mt","variant","align","gutterBottom","severity","mb","onSubmit","noValidate","margin","required","fullWidth","label","autoComplete","autoFocus","onChange","error","helperText","type","disabled","size","textAlign","to","style","textDecoration"],"sources":["C:/Users/admin/cybersecurity-platform (6)/cybersecurity-platform v1/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Alert,\r\n  CircularProgress,\r\n} from '@mui/material';\r\nimport authService from '../services/auth';\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '',\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [serverError, setServerError] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Check for success message from registration\r\n    if (location.state?.message) {\r\n      setSuccessMessage(location.state.message);\r\n      // Clear the message from location state\r\n      window.history.replaceState({}, document.title);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!formData.username) {\r\n      newErrors.username = 'Username is required';\r\n    }\r\n    \r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setServerError('');\r\n    setSuccessMessage('');\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const user = await authService.login(formData.username, formData.password);\r\n      \r\n      // Store user info\r\n      localStorage.setItem('user', JSON.stringify({\r\n        id: user.id,\r\n        username: user.username,\r\n        role: user.role\r\n      }));\r\n      \r\n      navigate('/dashboard');\r\n    } catch (err) {\r\n      setServerError(err.message || 'Authentication failed. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper elevation={3} sx={{ p: 4, mt: 8 }}>\r\n        <Typography component=\"h1\" variant=\"h5\" align=\"center\" gutterBottom>\r\n          Login\r\n        </Typography>\r\n        \r\n        {successMessage && (\r\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n            {successMessage}\r\n          </Alert>\r\n        )}\r\n        \r\n        {serverError && (\r\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n            {serverError}\r\n          </Alert>\r\n        )}\r\n        \r\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            autoFocus\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            error={!!errors.username}\r\n            helperText={errors.username}\r\n          />\r\n          \r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            error={!!errors.password}\r\n            helperText={errors.password}\r\n          />\r\n          \r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            sx={{ mt: 3, mb: 2 }}\r\n            disabled={loading}\r\n          >\r\n            {loading ? <CircularProgress size={24} /> : 'Login'}\r\n          </Button>\r\n          \r\n          <Box sx={{ textAlign: 'center' }}>\r\n            <Link to=\"/register\" style={{ textDecoration: 'none' }}>\r\n              Don't have an account? Sign up\r\n            </Link>\r\n          </Box>\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}